<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lucky Chest</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
      background-color: #f9f9f9;
    }
    #puntos, #intentos {
      font-size: 22px;
      margin: 15px;
    }
    .cofre {
      font-size: 40px;
      padding: 20px;
      margin: 20px;
      cursor: pointer;
      border: 2px solid black;
      border-radius: 10px;
      display: inline-block;
      width: 100px;
      height: 100px;
      background: white;
    }
    .cofre:hover {
      background: #e0e0e0;
    }
    #mensaje {
      font-size: 18px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2 id="puntos">Puntos: 0</h2>
  <div>
    <div class="cofre" onclick="abrirCofre(0)">üß∞</div>
    <div class="cofre" onclick="abrirCofre(1)">üß∞</div>
  </div>
  <h3 id="intentos">Intentos restantes: 3</h3>
  <p id="mensaje"></p>

  <script>
    // Cargar datos de localStorage
    let puntos = parseInt(localStorage.getItem("puntos")) || 0;
    let fechaGuardada = localStorage.getItem("fecha");
    let intentos = parseInt(localStorage.getItem("intentos"));

    let hoy = new Date().toDateString();

    // Reiniciar intentos si es un nuevo d√≠a
    if (fechaGuardada !== hoy) {
      intentos = 3;
      localStorage.setItem("fecha", hoy);
    }
    if (isNaN(intentos)) intentos = 3;

    document.getElementById("puntos").textContent = "Puntos: " + puntos;
    document.getElementById("intentos").textContent = "Intentos restantes: " + intentos;

    function abrirCofre(eleccion) {
      if (intentos > 0) {
        let cofreGanador = Math.floor(Math.random() * 2); // 0 o 1
        if (eleccion === cofreGanador) {
          puntos += 10;
          document.getElementById("mensaje").textContent = "üéâ ¬°Ganaste 10 puntos!";
        } else {
          document.getElementById("mensaje").textContent = "‚ùå Nada por aqu√≠...";
        }
        intentos--;
        // Guardar en localStorage
        localStorage.setItem("puntos", puntos);
        localStorage.setItem("intentos", intentos);

        // Actualizar pantalla
        document.getElementById("puntos").textContent = "Puntos: " + puntos;
        document.getElementById("intentos").textContent = "Intentos restantes: " + intentos;
      } else {
        document.getElementById("mensaje").textContent = "‚ö†Ô∏è Ya usaste tus intentos. Vuelve ma√±ana.";
      }
    }
  </script>
</body>
</html>
